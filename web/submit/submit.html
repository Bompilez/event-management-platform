<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Send inn arrangement</title>

  <link rel="stylesheet" href="./submit.css" />
  <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet" />
</head>
<body>

  <main class="page">
    <section class="logo">
      <div class="logo-head">
        <img src="./submit-assets/Campus-KSU-horizon-Grønn-5615.svg">
      </div>
    </section>
    <header class="hero">
      <div class="hero-inner">
        <h1>Send inn arrangement</h1>
        <p class="lead">
          Skjemaet brukes til publisering av arrangementer på Campus Kristiansund.
        </p>

        <div class="info-grid">
          <div class="info-card">
            <h2>Hva skjer etter innsending?</h2>
            <ul>
              <li>Vi sjekker innholdet og kan ta kontakt ved spørsmål.</li>
              <li>Arrangementet publiseres etter godkjent innhold av oss.</li>
            </ul>
          </div>

          <div class="info-card">
            <h2>Kontakt oss</h2>
            <legend>Ta kontakt ved spørsmål om innsending av skjemaet<br><br></legend>
            <ul>
              <li><a href="mailto:post@campusksu.no">post@campusksu.no</a></li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <section class="contact-panel">
      <div class="form-head contact-information">
        <h2>Kontaktperson for innsending</h2>
        <p class="muted">Felter merket med * må fylles ut.</p>
      </div>
      <fieldset class="block contact-block">
        <legend>Synlig kun for oss, er ikke den del av arrangement-innholdet</legend>

        <div class="grid2">
          <div class="field">
            <label for="contactName">Fullt navn *</label>
            <input id="contactName" class="input" autocomplete="name" required form="submitForm" />
          </div>

          <div class="field">
            <label for="contactEmail">E-post *</label>
            <input id="contactEmail" class="input" type="email" autocomplete="email" required form="submitForm" />
          </div>
        </div>

        <div class="grid2">
          <div class="field">
            <label for="contactPhone">Telefon *</label>
            <input id="contactPhone" class="input" autocomplete="tel" required form="submitForm" />
          </div>

          <div class="field">
            <label for="contactOrg">Organisasjon (valgfritt)</label>
            <input id="contactOrg" class="input" autocomplete="organization" form="submitForm" />
          </div>
        </div>
      </fieldset>
    </section>

    <!-- FORM -->
    <section class="form-wrap">
      <div class="form-head">
        <h2>Arrangement innhold</h2>
        <p class="muted">Felter merket med * må fylles ut.</p>
      </div>

      <form id="submitForm" class="form" novalidate>
        <!-- honeypot -->
        <div class="hp" aria-hidden="true">
          <label>Ikke fyll ut dette feltet</label>
          <input type="text" id="hpField" autocomplete="off" tabindex="-1" />
        </div>

        <fieldset class="block">

          <div class="field">
            <label for="title">Tittel *</label>
            <input id="title" class="input" required />
          </div>

          <div class="field">
            <label for="content">Beskrivelse *</label>
            <div class="hint">Vises på arrangementsiden. </div>
            <div class="quill-wrap">
              <div id="contentEditor" class="quill-editor"></div>
            </div>
            <input type="hidden" id="content" name="content" required />
          </div>

          <div class="grid3">
            <div class="field">
              <label for="location">Sted *</label>
              <input id="location" class="input" value="Campus Kristiansund" required />
            </div>
            <div class="field">
              <label for="room">Rom (valgfritt)</label>
              <input id="room" class="input" />
            </div>
            <div class="field">
              <label for="floor">Etasje (valgfritt)</label>
              <input id="floor" class="input" />
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="date">Dato *</label>
              <input id="date" type="date" class="input" required />
            </div>

            <div class="grid2-inner">
              <div class="field">
                <label for="startTime">Fra *</label>
                <input id="startTime" class="input" placeholder="12:00" required />
              </div>
              <div class="field">
                <label for="endTime">Til (valgfritt)</label>
                <input id="endTime" class="input" placeholder="14:00" />
              </div>
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="organizerName">Arrangørnavn *</label>
              <div class="hint">Navn på arrangøren, f.eks. bedrift eller organisasjon.</div>
              <input id="organizerName" class="input" required />
            </div>

            <div class="field">
              <label for="organizerUrl">Hjemmesideadresse (valgfritt)</label>
              <div class="hint">Vises som lenke på arrangementsiden.</div>
              <input id="organizerUrl" class="input" placeholder="www.eksempel.no" />
            </div>
          </div>

        <div class="field">
          <span class="label">Logo (PNG) (valgfritt)</span>
          <div class="hint">Vises sammen med arrangørnavn.</div>
          <label class="image-drop image-drop--small" for="logoFile">
            <input id="logoFile" type="file" accept="image/png" />
            <span class="image-drop-icon" aria-hidden="true">+</span>
            <span class="image-drop-text">Klikk for å velge logo</span>
            <span class="image-drop-sub">Maks 2 MB. Hvit eller transparent bakgrunn.</span>
          </label>
        </div>

        <div class="logo-preview">
          <img id="logoPreview" alt="" />
        </div>
        <p id="logoError" style="color:#b91c1c;margin:8px 0 0;"></p>
        <button class="btn btn-ghost" type="button" id="btnRemoveLogo" style="display:none;">Fjern logo</button>

        <div class="field">
          <span class="label">Bilde (jpg/png/webp) *</span>
          <div class="hint">Vises i oversikten og øverst på arrangementsiden.</div>
          <label class="image-drop" for="imageFile">
            <input id="imageFile" type="file" accept="image/jpeg,image/png,image/webp" />
            <span class="image-drop-icon" aria-hidden="true">+</span>
            <span class="image-drop-text">Klikk for å velge bilde</span>
            <span class="image-drop-sub">Maks 4 MB. Bildet må være liggende format.</span>
          </label>
          <details class="image-tip">
            <summary>Se bildetips</summary>
            <div class="image-tip-body">
              <p>Et godt bilde er liggende og tydelig (ikke for smalt).</p>
              <p>Bildet kuttes til 4:3-format, anbefalt oppløsning: 1200 × 900 px.</p>
            </div>
          </details>
          <div class="image-preview-43" id="imagePreview43Wrap" style="display:none;">
            <div class="image-preview-43-label">Pass på at viktig innhold er innenfor forhåndsvisningen under. Bildet kuttes til 4:3.</div>
            <div class="image-preview-43-frame">
              <img id="imagePreview43" alt="">
            </div>
          </div>
          <p id="imageError" style="color:#b91c1c;margin:8px 0 0;"></p>
          <button class="btn btn-ghost" type="button" id="btnRemoveImage" style="display:none;">Fjern bilde</button>
        </div>


          <div class="field">
            <label class="toggle">
              <input type="checkbox" id="showPriceCapacity" />
              <span>Legg til pris og kapasitet (valgfritt)</span>
            </label>
          </div>

          <div class="grid2" id="priceCapacityBlock">
            <div class="field">
              <label for="price">Pris (kr)</label>
              <input id="price" type="number" class="input" placeholder="0" min="0" />
            </div>

            <div class="field">
              <label for="capacity">Kapasitet, antall personer</label>
              <input id="capacity" type="number" class="input" placeholder="25" min="0" />
            </div>
          </div>

          <div class="field">
            <label class="toggle">
              <input type="checkbox" id="showCta" />
              <span>Legg til påmeldingslenke (valgfritt)</span>
            </label>
          </div>

          <div class="grid2" id="ctaBlock">
            <div class="field">
              <label for="ctaUrl">Påmledings-lenke</label>
              <input id="ctaUrl" class="input" placeholder="https://…" />
            </div>
          </div>
        </fieldset>

        <fieldset class="block">
          <legend>Program</legend>

          <div class="field">
            <label class="toggle">
              <input type="checkbox" id="showProgram" />
              <span>Legg til program (valgfritt)</span>
            </label>
          </div>

          <div class="program-head" id="programHead">
            <button type="button" class="btn" id="btnAddProgram">+ Legg til punkt</button>
          </div>

          <div id="programRows" class="program-rows"></div>

          <template id="tplProgramRow">
            <div class="program-row">
              <input class="input program-time" placeholder="08:00" />
              <input class="input program-text" placeholder="Hva skjer?" />
              <button type="button" class="icon-btn danger program-remove" title="Fjern">✕</button>
            </div>
          </template>
        </fieldset>

        <div class="field">
          <label class="toggle terms-toggle" id="termsToggle">
            <input type="checkbox" id="acceptTerms" />
            <span>Jeg godkjenner vilkår for innsending</span>
            <button class="link-btn" type="button" id="openTerms">Se vilkår</button>
          </label>
        </div>

        <div class="actions">
          <button class="btn" type="reset">Tøm</button>
          <button class="btn btn-primary" id="btnSubmit" type="submit">Send inn</button>
        </div>

        <div id="formMessage" class="message" role="status" aria-live="polite"></div>
      </form>
    </section>
  </main>

  <div id="submitLoading" class="loading-overlay" aria-hidden="true">
    <div class="loading-card">
      <div class="spinner" aria-hidden="true"></div>
      <div>Laster...</div>
    </div>
  </div>

  <div id="successModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Takk for innsending">
      <button class="icon-btn modal-close" data-close="1" aria-label="Lukk">✕</button>
      <div class="modal-body">
        <h2>Takk for innsendingen!</h2>
        <p>Vi har mottatt arrangementet og gjennomgår det fortløpende.</p>
        <p class="muted">Du kan lukke denne fanen nå.</p>
        <div class="modal-actions">
          <button class="btn btn-primary" data-close="1">Lukk</button>
        </div>
      </div>
    </div>
  </div>

  <div id="termsModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Vilkår for innsending">
      <button class="icon-btn modal-close" data-close="1" aria-label="Lukk">✕</button>
      <div class="modal-body">
        <h2>Vilkår for innsending</h2>
        <p>Vi lagrer informasjonen du sender inn for å publisere og administrere arrangementet.</p>
        <p>Dette inkluderer kontaktinfo, tekst og eventuelle bilder/logo.</p>
        <p>Opplysningene lagres så lenge arrangementet er aktivt og i etterkant for historikk/arkiv.</p>
        <p class="muted">Spørsmål? Kontakt Campus Kristiansund: <a href="mailto:post@campusksu.no">post@campusksu.no</a></p>
        <div class="modal-actions">
          <button class="btn btn-primary" data-close="1">Lukk</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    window.RECAPTCHA_SITE_KEY = "6LdOh1AsAAAAALmLYC8z0j3Bl5_VyBDLb99b60Pm";
  </script>
  <script src="https://www.google.com/recaptcha/api.js?render=6LdOh1AsAAAAALmLYC8z0j3Bl5_VyBDLb99b60Pm"></script>
  <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>
  <script type="module" src="./submit.js"></script>
</body>
</html>
