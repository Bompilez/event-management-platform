<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Send inn arrangement</title>

  <link rel="stylesheet" href="./submit.css" />
  <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet" />
</head>
<body>

  <main class="page">
    <!-- INFO -->
    <header class="hero">
      <div class="hero-inner">
        <h1>Send inn arrangement til Campus Kristiansund</h1>
        <p class="lead">
          Bruk skjemaet under for å sende inn et arrangement til publisering.
          Innsendinger blir gjennomgått før de legges ut.
        </p>

        <div class="info-grid">
          <div class="info-card">
            <h2>Hva skjer etter innsending?</h2>
            <ul>
              <li>Arrangør kan bli kontaktet ved behov for avklaringer.</li>
              <li>Arrangementet publiseres når det er godkjent.</li>
            </ul>
          </div>

          <div class="info-card">
            <h2>Tips</h2>
            <ul>
              <li>Skriv en kort og tydelig oppsummering.</li>
              <li>Legg inn program dersom dere har tidspunkter.</li>
              <li>Bilde: legg inn en lenke (opplasting kommer senere).</li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <!-- FORM -->
    <section class="form-wrap">
      <div class="form-head">
        <h2>Skjema</h2>
        <p class="muted">Felter merket med * er påkrevd.</p>
      </div>

      <form id="submitForm" class="form" novalidate>
        <!-- honeypot -->
        <div class="hp" aria-hidden="true">
          <label>Ikke fyll ut dette feltet</label>
          <input type="text" id="hpField" autocomplete="off" tabindex="-1" />
        </div>

        <fieldset class="block">
          <legend>Kontaktinfo (ansvarlig for innsending)</legend>

          <div class="grid2">
            <div class="field">
              <label for="contactName">Navn *</label>
              <input id="contactName" class="input" autocomplete="name" required />
            </div>

            <div class="field">
              <label for="contactEmail">E-post *</label>
              <input id="contactEmail" class="input" type="email" autocomplete="email" required />
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="contactPhone">Telefon</label>
              <input id="contactPhone" class="input" autocomplete="tel" />
            </div>

            <div class="field">
              <label for="contactOrg">Organisasjon / bedrift</label>
              <input id="contactOrg" class="input" autocomplete="organization" />
            </div>
          </div>
        </fieldset>

        <fieldset class="block">
          <legend>Arrangement</legend>

          <div class="field">
            <label for="title">Tittel *</label>
            <input id="title" class="input" required />
          </div>

          <div class="field">
            <label for="summary">Oppsummering *</label>
            <textarea id="summary" class="textarea" rows="3" maxlength="150" required></textarea>
            <div class="field-max-word">
              <small class="hint">Kort oppsumering av arrangemntet</small>
              <small class="hint" id="summaryCounter">0 / 150 tegn</small>
            </div>
          </div>

          <div class="field">
            <label for="content">Brødtekst *</label>
            <div class="quill-wrap">
              <div id="contentEditor" class="quill-editor"></div>
            </div>
            <input type="hidden" id="content" name="content" required />
          </div>

          <div class="grid3">
            <div class="field">
              <label for="location">Sted *</label>
              <input id="location" class="input" required />
            </div>
            <div class="field">
              <label for="room">Rom</label>
              <input id="room" class="input" />
            </div>
            <div class="field">
              <label for="floor">Etasje</label>
              <input id="floor" class="input" />
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="date">Dato *</label>
              <input id="date" type="date" class="input" required />
            </div>

            <div class="grid2-inner">
              <div class="field">
                <label for="startTime">Fra *</label>
                <input id="startTime" class="input" placeholder="12:00" required />
              </div>
              <div class="field">
                <label for="endTime">Til</label>
                <input id="endTime" class="input" placeholder="14:00" />
              </div>
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="organizerName">Arrangørnavn *</label>
              <input id="organizerName" class="input" required />
            </div>

            <div class="field">
              <label for="organizerType">Kategori</label>
              <select id="organizerType" class="select">
                <option value="external">Ekstern</option>
                <option value="internal">Campus</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label for="organizerUrl">Arrangør-lenke</label>
            <input id="organizerUrl" class="input" placeholder="https://…" />
          </div>

        <div class="field">
          <span class="label">Bilde (jpg/png/webp)</span>
          <label class="image-drop" for="imageFile">
            <input id="imageFile" type="file" accept="image/jpeg,image/png,image/webp" />
            <span class="image-drop-icon" aria-hidden="true">+</span>
            <span class="image-drop-text">Klikk for å velge bilde</span>
            <span class="image-drop-sub">Maks 1 MB. Bildet må være liggende format.</span>
          </label>
        </div>

        <img id="imagePreview" style="display:none;max-width:100%;border-radius:12px;margin-top:10px;" alt="">
        <p id="imageError" style="color:#b91c1c;margin:8px 0 0;"></p>


          <div class="grid2">
            <div class="field">
              <label for="price">Pris (kr)</label>
              <input id="price" type="number" class="input" placeholder="0" min="0" />
            </div>

            <div class="field">
              <label for="capacity">Kapasitet</label>
              <input id="capacity" type="number" class="input" placeholder="25" min="0" />
            </div>
          </div>

          <div class="field">
            <label for="registrationDeadline">Påmeldingsfrist</label>
            <input id="registrationDeadline" type="datetime-local" class="input" />
          </div>

          <div class="grid2">
            <div class="field">
              <label for="ctaText">Påmledings-knapp</label>
              <input id="ctaText" class="input" placeholder="Meld deg på" />
            </div>

            <div class="field">
              <label for="ctaUrl">Påmledings-lenke</label>
              <input id="ctaUrl" class="input" placeholder="https://…" />
            </div>
          </div>
        </fieldset>

        <fieldset class="block">
          <legend>Program (valgfritt)</legend>

          <div class="program-head">
            <button type="button" class="btn" id="btnAddProgram">+ Legg til punkt</button>
          </div>

          <div id="programRows" class="program-rows"></div>

          <template id="tplProgramRow">
            <div class="program-row">
              <input class="input program-time" placeholder="08:00" />
              <input class="input program-text" placeholder="Hva skjer?" />
              <button type="button" class="icon-btn danger program-remove" title="Fjern">✕</button>
            </div>
          </template>
        </fieldset>

        <div class="actions">
          <button class="btn" type="reset">Tøm</button>
          <button class="btn btn-primary" id="btnSubmit" type="submit">Send inn</button>
        </div>

        <div id="formMessage" class="message" role="status" aria-live="polite"></div>
      </form>
    </section>
  </main>

  <div id="successModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Takk for innsending">
      <button class="icon-btn modal-close" data-close="1" aria-label="Lukk">✕</button>
      <div class="modal-body">
        <h2>Takk for innsendingen!</h2>
        <p>Vi har mottatt arrangementet og gjennomgar det fortlopende.</p>
        <p class="muted">Du kan lukke denne fanen na.</p>
        <div class="modal-actions">
          <button class="btn btn-primary" data-close="1">Lukk</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    window.RECAPTCHA_SITE_KEY = "6LdOh1AsAAAAALmLYC8z0j3Bl5_VyBDLb99b60Pm";
  </script>
  <script src="https://www.google.com/recaptcha/api.js?render=6LdOh1AsAAAAALmLYC8z0j3Bl5_VyBDLb99b60Pm"></script>
  <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>
  <script type="module" src="./submit.js"></script>
</body>
</html>
